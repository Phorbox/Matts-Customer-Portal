using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Microsoft.AspNetCore.Mvc;
using Models

namespace backend.Controllers
{
    [Route("api/[controller]")]
    [ApiController]
    public class WorkorderController : ControllerBase
    {
        List<Workorder> testWorkorder = new List<Workorder>
            {
                new Workorder
                {
                    Workorderid = 1,
                    Jobid = 1,
                    Clientid = 1,
                    Inputid = 1,
                    Status = "Processing",
                    DateApproved = new System.DateTime(2020, 1, 1),
                    DueDate = new System.DateTime(2021, 1, 1),
                    DateCreated = new System.DateTime(2022, 1, 1)
                },
                new Workorder
                {
                    Workorderid = 2,
                    Jobid = 2,
                    Clientid = 1,
                    Inputid = 2,
                    Status = "Pending Approval",
                    DateApproved = new System.DateTime(2020, 1, 1),
                    DueDate = new System.DateTime(2021, 1, 1),
                    DateCreated = new System.DateTime(2022, 1, 1)
                },
                new Workorder
                {
                    Workorderid = 3,
                    Jobid = 1,
                    Clientid = 2,
                    Inputid = 3,
                    Status = "Processing",
                    DateApproved = new System.DateTime(2020, 1, 1),
                    DueDate = new System.DateTime(2021, 1, 1),
                    DateCreated = new System.DateTime(2022, 1, 1)
                }
            };

        [HttpGet]
        public List<Workorder> Get()
        {
            return testWorkorder;
        }

        [HttpGet("{id}")]
        public Workorder Get(int id)
        {
            return testWorkorder.FirstOrDefault(x => x.Workorderid == id);
        }

        [HttpPost]
        public void Post([FromBody] Workorder workorder)
        {
            testWorkorder.Add(workorder);
        }

        [HttpPut("{id}")]
        public void Put(int id, [FromBody] Workorder workorder)
        {
            var index = testWorkorder.FindIndex(x => x.Workorderid == id);
            testWorkorder[index] = workorder;
        }

        [HttpDelete("{id}")]
        public void Delete(int id)
        {
            var workorder = testWorkorder.FirstOrDefault(x => x.Workorderid == id);
            testWorkorder.Remove(workorder);
        }

        
    }
}